var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(n,t,o)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,r=(e,n)=>{for(var t in n||(n={}))l.call(n,t)&&i(e,t,n[t]);if(o)for(var t of o(n))s.call(n,t)&&i(e,t,n[t]);return e},a=(e,o)=>n(e,t(o));import{r as c,j as u,k as d,P as m,l as g,m as v,E as f}from"./index-abf93fc7.js";import{Y as b,d as p,R as y,a7 as x,U as w,I as h,D as k,E as C,K as L,T as E,z as F,f as B,i as S,ac as O,l as P}from"./vue-18c32ca4.js";let T;const j=function(e={}){if(!u)return;const n=A(e);n.fullscreen&&T&&(T.remvoeElLoadingChild(),T.close());const t=function(e){let n;const t=p(!1),o=y(a(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function l(){const e=o.parent;if(!e.vLoadingAddClassList){let n=e.getAttribute("loading-number");n=Number.parseInt(n)-1,n?e.setAttribute("loading-number",n.toString()):(c(e,"el-loading-parent--relative"),e.removeAttribute("loading-number")),c(e,"el-loading-parent--hidden")}s()}function s(){var e,n;null==(n=null==(e=u.$el)?void 0:e.parentNode)||n.removeChild(u.$el)}function i(){t.value&&(t.value=!1,l())}const u=x({name:"ElLoading",setup:()=>()=>{const e=o.spinner||o.svg,n=w("svg",r({class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[w("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),t=o.text?w("p",{class:"el-loading-text"},[o.text]):void 0;return w(E,{name:"el-loading-fade",onAfterLeave:i},{default:h((()=>[k(L("div",{style:{backgroundColor:o.background||""},class:["el-loading-mask",o.customClass,o.fullscreen?"is-fullscreen":""]},[w("div",{class:"el-loading-spinner"},[n,t])]),[[C,o.visible]])]))})}}).mount(document.createElement("div"));return a(r({},b(o)),{setText:function(e){o.text=e},remvoeElLoadingChild:s,close:function(){var s;e.beforeClose&&!e.beforeClose()||(o.parent.vLoadingAddClassList=void 0,t.value=!0,clearTimeout(n),n=window.setTimeout((()=>{t.value&&(t.value=!1,l())}),400),o.visible=!1,null==(s=e.closed)||s.call(e))},handleAfterLeave:i,vm:u,get $el(){return u.$el}})}(a(r({},n),{closed:()=>{var e;null==(e=n.closed)||e.call(n),n.fullscreen&&(T=void 0)}}));$(n,n.parent,t),q(n,n.parent,t),n.parent.vLoadingAddClassList=()=>q(n,n.parent,t);let o=n.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",n.parent.setAttribute("loading-number",o),n.parent.appendChild(t.$el),F((()=>t.visible.value=n.visible)),n.fullscreen&&(T=t),t},A=e=>{var n,t,o,l;let s;return s=B(e.target)?null!=(n=document.querySelector(e.target))?n:document.body:e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&(null==(t=e.fullscreen)||t),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(l=e.visible)||l,target:s}},$=async(e,n,t)=>{const o={};if(e.fullscreen)t.originalPosition.value=d(document.body,"position"),t.originalOverflow.value=d(document.body,"overflow"),o.zIndex=m.nextZIndex();else if(e.parent===document.body){t.originalPosition.value=d(document.body,"position"),await F();for(const n of["top","left"]){const t="top"===n?"scrollTop":"scrollLeft";o[n]=e.target.getBoundingClientRect()[n]+document.body[t]+document.documentElement[t]-parseInt(d(document.body,`margin-${n}`),10)+"px"}for(const n of["height","width"])o[n]=`${e.target.getBoundingClientRect()[n]}px`}else t.originalPosition.value=d(n,"position");for(const[l,s]of Object.entries(o))t.$el.style[l]=s},q=(e,n,t)=>{"absolute"!==t.originalPosition.value&&"fixed"!==t.originalPosition.value?g(n,"el-loading-parent--relative"):c(n,"el-loading-parent--relative"),e.fullscreen&&e.lock?g(n,"el-loading-parent--hidden"):c(n,"el-loading-parent--hidden")},R=Symbol("ElLoading"),V=(e,n)=>{var t,o,l,s;const i=n.instance,r=e=>S(n.value)?n.value[e]:void 0,a=n=>(e=>{const n=B(e)&&(null==i?void 0:i[e])||e;return n?p(n):n})(r(n)||e.getAttribute(`element-loading-${O(n)}`)),c=null!=(t=r("fullscreen"))?t:n.modifiers.fullscreen,u={text:a("text"),svg:a("svg"),svgViewBox:a("svgViewBox"),spinner:a("spinner"),background:a("background"),customClass:a("customClass"),fullscreen:c,target:null!=(o=r("target"))?o:c?void 0:e,body:null!=(l=r("body"))?l:n.modifiers.body,lock:null!=(s=r("lock"))?s:n.modifiers.lock};e[R]={options:u,instance:j(u)}},z={mounted(e,n){n.value&&V(e,n)},updated(e,n){const t=e[R];n.oldValue!==n.value&&(n.value&&!n.oldValue?V(e,n):n.value&&n.oldValue?S(n.value)&&((e,n)=>{for(const t of Object.keys(n))P(n[t])&&(n[t].value=e[t])})(n.value,t.options):null==t||t.instance.close())},unmounted(e){var n;null==(n=e[R])||n.instance.close()}},I={install(e){e.directive("loading",z),e.config.globalProperties.$loading=j},directive:z,service:j},M=z;var D=()=>{let e=p(!0);function n(e){let n=document.documentElement;e.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()}return{showGlobalLoading:function(){e=I.service({lock:!0,text:"加载中...",background:"rgba(255, 255, 255, 0.7)"})},hideGlobalLoading:function(){setTimeout((()=>{e.close()}),1e3)},showMessageBox:function(e,n,t,o,l,s,i){v.confirm(t,e,{confirmButtonText:"确认",cancelButtonText:"取消",center:!0,"round-button":!1,"button-size":"default","close-on-click-modal":!1,"show-cancel-button":o,"show-confirm-button":l,type:n,beforeClose:(e,n,t)=>{"confirm"===e?(n.confirmButtonLoading=!0,n.confirmButtonText=0===s?"正在删除中...":"正在修改中...",setTimeout((()=>{t(),n.confirmButtonLoading=!1}),1e3)):t()}}).then((e=>{!0===i()&&f({type:"success",message:0===s?"删除成功":"修改成功"})})).catch((e=>{f({type:"info",message:"已取消"})}))},changeFullScreen:n,listenerEvent:function(e,t){document.onkeydown=e=>{122==e.keyCode&&(e.preventDefault(),n(t))},document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e)},showMessageText:function(e="",n="warning",t,o=!1,l=2e3,s=!1){f({showClose:!0,message:e,type:n,icon:t,dangerouslyUseHTMLString:o,duration:l,"show-close":s})}}};export{M as E,D as h};
